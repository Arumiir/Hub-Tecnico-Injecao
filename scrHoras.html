<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">

<!-- VIEWPORT CORRETO (ESSENCIAL) -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<title>Simulador de Produção</title>

<style>
*,
*::before,
*::after {
    box-sizing: border-box;
    user-select: none;
}

html {
    font-size: 16px;
}

@media (max-width: 480px) {
    html {
        font-size: 17px;
    }
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background: #000;
    color: #eaeaea;
    margin: 0;
    min-height: 100vh;
    padding: 14px;
}

/* CONTAINER MOBILE-FIRST */
.container {
    width: 100%;
    max-width: 520px; /* evita efeito “desktop miniatura” */
    margin: 0 auto;
    background: #0b0b0b;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 0 25px rgba(0, 80, 255, 0.25);
}

h2 {
    margin-top: 0;
    color: #ffffff;
    text-align: center;
}

.slide { display: none; }
.slide.active { display: block; }

label {
    display: block;
    margin-top: 14px;
    font-size: 14px;
}

input, select {
    width: 100%;
    padding: 11px;
    margin-top: 5px;
    border-radius: 6px;
    border: none;
    font-size: 15px;
    background: #111;
    color: #fff;
}

input::placeholder {
    color: #777;
}

.buttons {
    margin-top: 26px;
    display: flex;
    gap: 12px;
}

button {
    flex: 1;
    padding: 14px;
    font-size: 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #2f6bff;
    color: #fff;
    font-weight: bold;
}

button.secondary {
    background: #333;
}

button:disabled {
    background: #222;
    color: #666;
}

.erro {
    margin-top: 15px;
    color: #ff4c4c;
    font-size: 14px;
    font-weight: bold;
}

/* RESULTADO */
.resultado-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 14px;
    margin-top: 20px;
    max-height: 60vh;
    overflow-y: auto;
}

@media (min-width: 480px) {
    .resultado-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.caixa {
    background: #000;
    padding: 14px;
    border-radius: 8px;
    border-left: 4px solid #2f6bff;
}

.caixa strong {
    display: block;
    font-weight: bold;
    margin-bottom: 4px;
}

.caixa .tempo-total {
    font-style: italic;
    font-size: 15px;
}

.caixa .tempo-programa {
    font-style: italic;
    opacity: 0.6;
    margin-left: 6px;
    font-size: 14px;
}

.status {
    margin-top: 22px;
    font-size: 16px;
    font-weight: bold;
    color: #2f6bff;
    text-align: center;
}
</style>
</head>

<body>

<div class="container">

<!-- SLIDE 1 -->
<div class="slide active">
    <h2>Parâmetros do Processo</h2>

    <label>Padrão hora carga</label>
    <input id="padraoHora" placeholder="147">

    <label>Estágios da máquina</label>
    <select id="estagios">
        <option value="">Selecione</option>
        <option value="12">12 estágios</option>
        <option value="18">18 estágios</option>
    </select>

    <label>Quantidade de matrizes</label>
    <input id="matrizes" placeholder="1">

    <div class="erro" id="erro1"></div>

    <div class="buttons">
        <span></span>
        <button onclick="validarSlide1()">Próximo</button>
    </div>
</div>

<!-- SLIDE 2 -->
<div class="slide">
    <h2>Configuração das Caixas</h2>

    <label>Pares por caixa</label>
    <input id="paresCaixa" placeholder="6">

    <label>Quantidade de etiquetas</label>
    <input id="etiquetas" placeholder="10">

    <label>Pares da última etiqueta</label>
    <input id="paresUltima" placeholder="2">

    <div class="erro" id="erro2"></div>

    <div class="buttons">
        <button class="secondary" onclick="prev()">Voltar</button>
        <button onclick="validarSlide2()">Próximo</button>
    </div>
</div>

<!-- SLIDE 3 -->
<div class="slide">
    <h2>Meta</h2>

    <label>Horas já produzidas (HH:MM) — opcional</label>
    <input id="produzido" placeholder="02:34">

    <label>Meta (HH:MM)</label>
    <input id="meta" placeholder="08:42">

    <div class="erro" id="erro3"></div>

    <div class="buttons">
        <button class="secondary" onclick="prev()">Voltar</button>
        <button onclick="validarSlide3()">Calcular</button>
    </div>
</div>

<!-- SLIDE 4 -->
<div class="slide">
    <h2>Resultado</h2>

    <div id="resultado" class="resultado-grid"></div>
    <div id="status" class="status"></div>

    <div class="buttons">
        <button class="secondary" onclick="prev()">Voltar</button>
        <button onclick="location.reload()">Reiniciar</button>
    </div>
</div>

</div>

<script>
let slideAtual = 0;
const slides = document.querySelectorAll(".slide");

function next() {
    slides[slideAtual].classList.remove("active");
    slideAtual++;
    slides[slideAtual].classList.add("active");
}

function prev() {
    slides[slideAtual].classList.remove("active");
    slideAtual--;
    slides[slideAtual].classList.add("active");
}

function validarSlide1() {
    if (!padraoHora.value || !estagios.value || !matrizes.value) {
        erro1.textContent = "Preencha todos os campos para avançar.";
        return;
    }
    erro1.textContent = "";
    next();
}

function validarSlide2() {
    if (!paresCaixa.value || !etiquetas.value || !paresUltima.value) {
        erro2.textContent = "Todos os campos são obrigatórios.";
        return;
    }
    erro2.textContent = "";
    next();
}

function validarSlide3() {
    if (!meta.value) {
        erro3.textContent = "Informe a meta para calcular.";
        return;
    }
    erro3.textContent = "";
    calcular();
}

function hhmmParaMin(h) {
    if (!h) return 0;
    let [hh, mm] = h.split(":").map(Number);
    return hh * 60 + mm;
}

function minParaHHMM(m) {
    let h = Math.floor(m / 60);
    let min = Math.round(m % 60);
    return `${String(h).padStart(2,"0")}:${String(min).padStart(2,"0")}`;
}

function calcular() {
    const prodHora = (padraoHora.value / estagios.value) * matrizes.value;
    const tempoPar = 60 / prodHora;

    let total = hhmmParaMin(produzido.value);
    let acumulado = 0;
    resultado.innerHTML = "";

    for (let i = 1; i <= etiquetas.value; i++) {
        let pares = (i == etiquetas.value) ? paresUltima.value : paresCaixa.value;
        let tempo = pares * tempoPar;

        acumulado += tempo;
        total += tempo;

        const box = document.createElement("div");
        box.className = "caixa";

        box.innerHTML = `
            <strong>Caixa ${i}:</strong>
            <div>
                <span class="tempo-total">${minParaHHMM(total)}</span>
                ${produzido.value ? `<span class="tempo-programa">(${minParaHHMM(acumulado)})</span>` : ""}
            </div>
        `;

        resultado.appendChild(box);

        if (total >= hhmmParaMin(meta.value)) break;
    }

    status.textContent =
        total >= hhmmParaMin(meta.value)
        ? "Meta atingida ou superada"
        : "Meta não atingida";

    next();
}
</script>

</body>
</html>
